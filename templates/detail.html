<!-- Extends the main layout so this page uses the shared navbar and styling -->
{% extends 'base.html' %}

<!-- Sets the page title shown in the browser tab -->
{% block title %}Detail - Online Bookstore{% endblock %}

<!-- Main content area for the cart page -->
{% block content %}
    <!-- Main book detail container -->
    <div class="book-card" 
         style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 2rem; display: grid; grid-template-columns: 1fr 2fr; gap: 2rem;">
        
        <!-- Left column: Book cover image -->
        <div>
            {% if book.cover_image %}
                <!-- Display uploaded book cover -->
                <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" 
                     style="width: 100%; height: auto; max-width: 400px; 
                            border-radius: 8px; object-fit: contain; margin-top: 9px;">
            {% else %}
                <!-- Fallback placeholder image -->
                <img src="https://placehold.co/400x500/e0e0e0/666666?text=No+Cover+Available" 
                     alt="No Cover Available"
                     style="width: 100%; height: auto; max-width: 400px; 
                            border-radius: 8px; object-fit: contain;">
            {% endif %}
        </div>

        <!-- Right column: Book information -->
        <div>
            <!-- Title -->
            <h1 style="margin-bottom: 0.8rem;">{{ book.title }}</h1>

            <!-- Author -->
            <p style="color: #666; font-size: 1.05rem; margin-bottom: 0.3rem;">
                <strong>Author:</strong> {{ book.author }}
            </p>

            <!-- Publisher -->
            <p style="color: #666; margin-bottom: 0.3rem;">
                <strong>Publisher:</strong> {{ book.publisher }}
            </p>

            <!-- ISBN -->
            <p style="color: #666; margin-bottom: 0.3rem;">
                <strong>ISBN:</strong> {{ book.isbn }}
            </p>

            <!-- Category -->
            <p style="color: #666; margin-bottom: 0.8rem;">
                <strong>Category:</strong> {{ book.category.name }}
            </p>

            <!-- Price -->
            <div style="font-size: 2rem; color: #e53e3e; font-weight: bold; margin: 1.5rem 0;">
                ${{ book.price }}
            </div>

            <!-- Stock count -->
            <p style="color: #666; margin-bottom: 1.5rem;">
                Stock: {{ book.stock }} copies
            </p>

            <!-- Description section -->
            <div style="margin-bottom: 1.5rem;">
                <h3 style="margin-bottom: 0.8rem;">Book Description</h3>
                <p style="line-height: 1.6; color: #555;">
                    {{ book.description|default:"No description available" }}
                </p>
            </div>

            <!-- Add to Cart button (only if user is logged in and book is in stock) -->
            {% if user.is_authenticated %}
                {% if book.stock > 0 %}
                    <button onclick="addToCart('{{ book.id }}')" 
                            class="btn btn-success" 
                            style="font-size: 1.1rem; width: 180px; height: 50px;">
                        Add to Cart
                    </button>
                {% else %}
                    <!-- Disabled button when out of stock -->
                    <button class="btn" 
                            style="background: #ccc; color: #666; cursor: not-allowed; font-size: 1.1rem; width: 180px; height: 50px;" 
                            disabled>
                        Out of Stock
                    </button>
                {% endif %}
            {% else %}
                <!-- Login button for guests -->
                <a href="{% url 'login' %}" 
                class="btn btn-primary" 
                style="font-size: 1.1rem; width: 210px; height: 50px; display: flex; align-items: center; justify-content: center;  text-decoration: none; background: #764ba2; color: white;">
                    Login to Purchase
                </a>
            {% endif %}
        </div>
    </div>
{% endblock %}
